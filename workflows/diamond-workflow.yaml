name: diamond-workflow
defaults:
  monitoring_url: "no-op://"
  user: "flp"
  dpl_config: "/etc/flp.d/diamond-workflow/diamond-workflow.dpl.json"
roles:
  - name: "internal-dpl-clock"
    connect:
    task:
      load: diamond-workflow-internal-dpl-clock
  - name: "A"
    connect:
    - name: from_internal-dpl-clock_to_A
      type: pull
      transport: shmem
      target: "{{ Parent().Path }}.internal-dpl-clock:from_internal-dpl-clock_to_A"
      rateLogging: 0
    task:
      load: diamond-workflow-A
  - name: "B"
    connect:
    - name: from_A_to_B
      type: pull
      transport: shmem
      target: "{{ Parent().Path }}.A:from_A_to_B"
      rateLogging: 0
    task:
      load: diamond-workflow-B
  - name: "C"
    connect:
    - name: from_A_to_C
      type: pull
      transport: shmem
      target: "{{ Parent().Path }}.A:from_A_to_C"
      rateLogging: 0
    task:
      load: diamond-workflow-C
  - name: "D"
    connect:
    - name: from_B_to_D
      type: pull
      transport: shmem
      target: "{{ Parent().Path }}.B:from_B_to_D"
      rateLogging: 0
    - name: from_C_to_D
      type: pull
      transport: shmem
      target: "{{ Parent().Path }}.C:from_C_to_D"
      rateLogging: 0
    task:
      load: diamond-workflow-D
